<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>QUnit Test Suite</title>
  <link rel="stylesheet" href="qunit/qunit.css" type="text/css" media="screen">

  <script type="text/javascript" src="qunit/qunit.js"></script>
  <script type="text/javascript" src="minispade.js"></script>
  <script type="text/javascript" src="source/ember-touch.js"></script>
  <script type="text/javascript" src="source/ember-touch-tests.js"></script>
</head>
<body>
  <h1 id="qunit-header">QUnit Test Suite</h1>
  <h2 id="qunit-banner"></h2>
  <div id="qunit-testrunner-toolbar"></div>
  <h2 id="qunit-userAgent"></h2>
  <ol id="qunit-tests"></ol>
  <div id="qunit-fixture">test markup</div>

  <script>
    // Load custom version of jQuery if possible
    var jQueryVersion = QUnit.urlParams.jquery || "1.7.2";
    if (jQueryVersion !== 'none') {
      document.write(unescape('%3Cscript src="http://code.jquery.com/jquery-'+jQueryVersion+'.js"%3E%3C/script%3E'));
    }
    // Close the script tag to make sure document.write happens
  </script>

  <script>
    // Fallback to default jQuery
    if (jQueryVersion !== 'none' && !window.jQuery) {
      if (console && console.warn) { console.warn("Unable to load jQuery "+jQueryVersion+". Using default."); }
      document.write(unescape('%3Cscript src="../lib/jquery-1.7.2.js"%3E%3C/script%3E'));
    }
    // Close the script tag to make sure document.write happens
  </script>


  <script type="text/javascript">
    // Handle extending prototypes
    QUnit.config.urlConfig.push('extendprototypes');

    window.ENV = window.ENV || {};
    var extendPrototypes = location.search.match(/extendprototypes=([^&]+)/);
    ENV['EXTEND_PROTOTYPES'] = !!(extendPrototypes && decodeURIComponent(extendPrototypes[1]));


    // hack qunit to not suck for Ember objects
    var originalTypeof = QUnit.jsDump.typeOf;

    QUnit.jsDump.typeOf = function(obj) {
      if (Ember && Ember.Object && Ember.Object.detectInstance(obj)) {
        return "emberObject";
      }

      return originalTypeof.call(this, obj);
    };

    QUnit.jsDump.parsers.emberObject = function(obj) {
      return obj.toString();
    }

    // Load Tests and Depenencies
    var packageName, re, match, moduleName, unique_test;


    var param_test = location.search.match(/test=([^&]+)/), unique_test;
    if ( param_test ) {
       unique_test = param_test[1];
    }

    // There are no requires for these in the code
    minispade.require('ember/main');


    packageName = 'ember-touch';
    re = new RegExp('^'+packageName+'/([^/]+)');

    minispade.require(packageName+'/main');

      for (moduleName in minispade.modules) {
        if (!minispade.modules.hasOwnProperty(moduleName)) { continue; }

        match = moduleName.match(re);
        if (match && match[1] === 'tests') {

          if ( unique_test ) {

            var test_location = moduleName.replace('ember-touch/tests/', '');
            //console.log(test_location);
            //console.log(unique_test);
            if ( unique_test === test_location ) {
              minispade.require(moduleName);
            }
          } else {

            //console.log(moduleName);
            minispade.require(moduleName);
          }
        

        }
      }




  </script>

</body>
</html>
